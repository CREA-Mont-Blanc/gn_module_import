<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8" />
    <title>Jeu de données</title>
  </head>

  <body>
    <div class="header">
      <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='css/metadata_pdf.css')}}"
    >
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='css/custom.css')}}"
    >
    <img
      class="bandeau"
      src="{{url_for('static', filename='images/Bandeau_pdf.png')}}"
      alt="Bandeau"
    >
    <img
      class="logo"
      src="{{url_for('static', filename='images/logo_structure.jpg')}}"
      alt="Logo"
    >
    </div>
    <div class="titre">
      <h5> Import ID {{ data.id_import }} </h5>
      <label class="label-titre">Jeu de données</label>
      <br>
      <label class="label-titre">
        {% if data.dataset_name: %}
        {{ data.dataset_name }}
        {% endif %}
      </label>
      <div class="ligne-titre ligne main-color"></div>
    </div>
    {% if data.taxa_count: %}
    <div class="etiquettes">
      <div class="etiquette">
        <div class="etiquette-haut">
          <img
            class="logo-etiquette"
            src="{{url_for('static', filename='images/Taxon_icon.svg')}}"
            alt="taxon-icon"
          >
          <div class="etiquette-bas">
            <small>Taxons</small>
            </br>
            {% if data.taxa_count: %}
            {{ data.taxa_count }}
            {% endif %}
          </div>
        </div>
      </div>
      <div class="etiquette">
        <div class="etiquette-haut">
          <img
            class="logo-etiquette"
            src="{{url_for('static', filename='images/Donnee_icon.svg')}}"
            alt="donnee-icon"
          >
          <div class="etiquette-bas">
            <small>Données</small>
            </br>
            {% if data.import_count: %}
            {{ data.import_count }}
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    {% endif %}
    <div class="description">
      <div class="left-block">
        <p class="fiche-descriptive">Fiche descriptive</p>
        <div class="information">
          <p class="info-titre">Identification</p>
          <p class="info-contenu">
            Fichier :
            <br>
            {% if data.full_file_name: %}
            {{ data.full_file_name }}
            {% endif %}
            <br>
            Date de soumission de l'import :
            {% if data.date_end_import: %}
            {{ data.date_end_import }}
            {% endif %}
            <br>
            Auteur :
            {% if data.author_name: %}
            {{ data.author_name }}
            {% endif %}
            <br>
            SRID :
            {% if data.srid: %}
            {{ data.srid }}
            {% endif %}
            <br>
            Encodage :
            {% if data.encoding: %}
            {{ data.encoding }}
            {% endif %}
            <br>
            Format :
            {% if data.format_source_file: %}
            {{ data.format_source_file }}
            {% endif %}
          </p>
        </div>

        {% if data.keywords: %}
        <div class="information">
          <p class="info-titre">Mots-clés</p>
          <p class="info-contenu">
            {{ data.keywords }}
          </p>
        </div>
        {% endif %}

      </div>

      <div
        class="right-block"
        style="display:grid"
      >
        <div class="zone">
          <p class="zone-geographique">Zone géographique</p>
          
          <img id="map" src="{{ data.map }}">
        </div>
        <div class="ca errors">
          <hr class="ligne-titre main-color">
          <h5>Erreurs</h5>
          <div>
            <table id="error-table">
              <thead>
                <tr>
                    <th class="main-color">Type d'erreur</th>
                    <th class="main-color">Champ</th>
                    <th class="main-color">Nombre d'erreur(s)</th>
                </tr>
              </thead>
              <tbody>
                {% for error in data.errors %}
                <tr>
                    <td>{{ error.error_type }}</td>
                    <td>{{ error.column_error }}</td>
                    <td>{{ error.id_rows | length }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="footer">
      <a href="{{data.url}}">Voir le rapport dans le module d'import</a>
      <span>{{data.date_end_import}}</span>
    </div>
  </body>
<style>
  /* Puts style here since I cannot make blueprint static files work...*/
  #map {
    margin-left: 5px;
    width: 400px;
  }
  h5 {
    text-align: center;
  }
  #error-table {
  border-collapse: collapse;
  width: 100%;
  margin-left: 5px;
  }

  #error-table td, #error-table th {
    border: 1px solid #ddd;
    padding: 8px;
  }

  #error-table tr:nth-child(even){background-color: #f2f2f2;}

  #error-table tr:hover {background-color: #ddd;}

  #error-table td {
    font-size: 10px;
  }

  #error-table th {
    padding-top: 8px;
    padding-bottom: 8px;
    text-align: left;
    color: white;
    font-size: 12px;
    
  }
</style>
</html>
